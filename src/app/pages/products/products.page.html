<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Winys Store</ion-title>
    <ion-buttons slot="end">
      @if (!isLoggedIn()) {
        <ion-button (click)="navigateToLogin()">
          <ion-icon name="log-in-outline" slot="start"></ion-icon>
          Login
        </ion-button>
      }
      @if (isLoggedIn()) {
        <ion-button (click)="goToCart()">
          <ion-icon name="cart-outline" slot="start"></ion-icon>
          Cart ({{ getCartItemCount() }})
        </ion-button>
        <ion-button (click)="goToProfile()">
          Welcome, {{ getCurrentUser()?.firstName }}
        </ion-button>
        <ion-button (click)="logout()" color="danger">
          <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
        </ion-button>
      }
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="products-container">
    <h2 class="page-title">Our Premium Wine Collection</h2>
    <p class="page-subtitle">30 exquisite wines from around the world</p>
    
    <ion-grid>
      <ion-row>
        @for (product of products; track product.id) {
          <ion-col size="12" size-md="6" size-lg="4">
            <ion-card class="product-card">
              <ion-card-header>
                <ion-card-title class="product-name">{{ product.name }}</ion-card-title>
                <div class="product-details">
                  <span class="wine-type {{ product.type.toLowerCase() }}">{{ product.type }}</span>
                  <span class="wine-region">{{ product.region }}</span>
                </div>
              </ion-card-header>
              
              <ion-card-content>
                <div class="product-image">
                  <span class="wine-emoji">
                    {{ product.type === 'Red' ? 'üç∑' : product.type === 'White' ? 'ü•Ç' : product.type === 'Ros√©' ? 'üåπ' : '‚ú®' }}
                  </span>
                </div>
                <p class="price">${{ product.price }}</p>
                <ion-button expand="block" (click)="addToCart(product)" color="primary">
                  <ion-icon name="cart-outline" slot="start"></ion-icon>
                  Add to Cart
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        }
      </ion-row>
    </ion-grid>
  </div>
</ion-content>